{"pageProps":{"title":"React useLayoutEffect vs useEffect","description":"Elaborating the difference between these two hooks","socialImage":"/blog/react-uselayouteffect-vs-useeffect/surface.jpg","content":"<p>They both do the same exact thing with a slightly different behavior, they even look the same.</p>\n<div class=\"remark-highlight\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2>useLayoutEffect</h2>\n<p>Runs before the component is rendered to the DOM, this is where you run code that has to be processed before the component is painted on the screen. For example, a chat box where you want to scroll to the bottom before the box is rendered.</p>\n<div class=\"remark-highlight\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  box<span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">scrollTop</span> <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">offsetHeight</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2>useEffect</h2>\n<p>Runs after the component is rendered to the DOM, this is where you make all of your requests or handle animations and it is what you need 90% of the times. If you are going to use <code>React.useEffect</code> for scrolling to the bottom of the chat box, you will notice a flicker before it scrolls to the bottom.</p>\n<div class=\"remark-highlight\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  box<span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">scrollTop</span> <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">offsetHeight</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p><img src=\"/blog/react-uselayouteffect-vs-useeffect/uselayouteffect-vs-useeffect.gif\" alt=\"Demo useLayoutEffect vs useEffect, where the useLayoutEffect scrolls to the bottom before the useEffect does\" title=\"useLayoutEffect vs useEffect\"></p>\n<p>I had to slow down this demo because useEffect was re-rendering very quickly that it was almost impossible to notice the scroll due to the small set of data used here.</p>\n<p>That's it, hope you found something useful.</p>\n","readTime":1,"date":"2021-01-23T15:14:27.226Z"},"__N_SSG":true}